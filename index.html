<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adriana Sousa - Sua Mente Te Sabota?</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg: #F8F5F0;
            --text: #33353A;
            --accent: #D4AF37;
            --dark: #1A2035;
            --white: #ffffff;
            --red: #DC2626;
            --success: #10B981;
            --purple: #7C3AED;
            
            --gold-gradient: linear-gradient(135deg, #D4AF37 0%, #E8C547 30%, #FFD700 70%, #B8860B 100%);
            --luxury-gradient: linear-gradient(135deg, #F8F5F0 0%, #E8E5E0 50%, #D8D5D0 100%);
            --dark-gradient: linear-gradient(135deg, #1A2035 0%, #2A3552 50%, #1F2B47 100%);
            --red-gradient: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%);
            --purple-gradient: linear-gradient(135deg, #7C3AED 0%, #5B21B6 100%);
            
            --shadow-luxury: 0 15px 50px rgba(26, 32, 53, 0.2), 0 8px 25px rgba(212, 175, 55, 0.15);
            --shadow-glow: 0 0 40px rgba(212, 175, 55, 0.5), 0 0 80px rgba(212, 175, 55, 0.2);
            --shadow-card: 0 8px 25px rgba(0, 0, 0, 0.1);
            
            --transition-smooth: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --transition-mind: all 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--luxury-gradient);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(212,175,55,0.12) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(212,175,55,0.08) 0%, transparent 40%);
            animation: breathingBackground 8s ease-in-out infinite;
        }

        @keyframes breathingBackground {
            0%, 100% { background-size: 100% 100%; }
            50% { background-size: 108% 108%; }
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
            padding: 15px;
            min-height: 100vh;
            position: relative;
        }

        /* Avatar com Overlay de Texto */
        .avatar-container {
            position: relative;
            display: inline-block;
            margin: 0 auto 20px;
        }

        .avatar {
            width: 200px;
            height: 300px;
            object-fit: cover;
            border-radius: 20px;
            border: 4px solid rgba(212, 175, 55, 0.5);
            box-shadow: var(--shadow-luxury);
            transition: var(--transition-smooth);
            display: block;
        }

        .avatar.speaking {
            animation: avatarGlow 2s ease-in-out infinite;
            border-color: rgba(220, 38, 38, 0.8);
        }

        @keyframes avatarGlow {
            0%, 100% { 
                border-color: rgba(220, 38, 38, 0.5);
                box-shadow: var(--shadow-luxury), 0 0 30px rgba(220, 38, 38, 0.3);
                transform: scale(1);
            }
            50% { 
                border-color: rgba(220, 38, 38, 0.9);
                box-shadow: var(--shadow-glow), 0 0 50px rgba(220, 38, 38, 0.6);
                transform: scale(1.02);
            }
        }

        /* Texto sobreposto no avatar */
        .avatar-text-overlay {
            position: absolute;
            top: 22%;
            left: 68%;
            transform: translateX(-50%);
            width: 70%;
            max-width: 140px;
            z-index: 10;
            pointer-events: none;
        }

        .avatar-message {
            background: transparent;
            backdrop-filter: none;
            border: none;
            border-radius: 0;
            padding: 4px 6px;
            font-family: 'Inter', sans-serif;
            font-size: 9px;
            font-weight: 900;
            color: var(--dark);
            text-align: center;
            opacity: 0;
            transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: none;
            transform: translateY(20px) scale(0.8);
            line-height: 1.1;
            text-shadow: 
                2px 2px 4px rgba(255, 255, 255, 0.9),
                0 0 8px rgba(255, 255, 255, 0.7);
            min-height: auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .avatar-message.show {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        .avatar-message.fadeout {
            opacity: 0;
            transform: translateY(-20px) scale(0.8);
            transition: all 0.6s ease-out;
        }

        /* Classes especiais para diferentes tipos de mensagem */
        .avatar-message.shock {
            color: var(--red);
            font-size: 10px;
            font-weight: 900;
            text-shadow: 
                2px 2px 4px rgba(255, 245, 245, 0.9),
                0 0 10px rgba(220, 38, 38, 0.3);
            animation: shockPulse 0.8s ease-out;
        }

        .avatar-message.revelation {
            color: var(--purple);
            font-size: 10px;
            font-weight: 900;
            text-shadow: 
                2px 2px 4px rgba(248, 245, 255, 0.9),
                0 0 10px rgba(124, 58, 237, 0.3);
            animation: revelationGlow 1s ease-out;
        }

        .avatar-message.location {
            color: var(--dark);
            font-size: 8px;
            font-weight: 900;
            text-shadow: 
                2px 2px 4px rgba(255, 252, 235, 0.9),
                0 0 8px rgba(212, 175, 55, 0.3);
        }

        .avatar-message.cultural {
            color: var(--success);
            font-size: 9px;
            font-weight: 900;
            text-shadow: 
                2px 2px 4px rgba(245, 255, 245, 0.9),
                0 0 8px rgba(16, 185, 129, 0.3);
        }

        .avatar-message.countdown {
            color: var(--red);
            font-size: 14px;
            font-weight: 900;
            text-shadow: 
                2px 2px 6px rgba(255, 245, 245, 0.9),
                0 0 15px rgba(220, 38, 38, 0.5);
            animation: countdownPulse 1s ease-out;
        }

        @keyframes shockPulse {
            0% { transform: translateY(0) scale(1); }
            30% { transform: translateY(-5px) scale(1.08); }
            100% { transform: translateY(0) scale(1); }
        }

        @keyframes revelationGlow {
            0% { transform: translateY(0) scale(1); }
            50% { 
                transform: translateY(-2px) scale(1.05); 
                box-shadow: 
                    0 15px 40px rgba(124, 58, 237, 0.5),
                    0 8px 20px rgba(0, 0, 0, 0.2);
            }
            100% { transform: translateY(0) scale(1); }
        }

        @keyframes countdownPulse {
            0% { transform: translateY(0) scale(1); }
            50% { 
                transform: translateY(-4px) scale(1.15); 
                text-shadow: 
                    2px 2px 8px rgba(255, 245, 245, 0.9),
                    0 0 25px rgba(220, 38, 38, 0.8);
            }
            100% { transform: translateY(0) scale(1); }
        }

        /* Header */
        .header {
            text-align: center;
            padding: 30px 20px;
            background: var(--white);
            margin: 10px 0 25px;
            border-radius: 20px;
            box-shadow: var(--shadow-card);
            border: 1px solid rgba(212, 175, 55, 0.3);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gold-gradient);
        }

        .name {
            font-size: 28px;
            font-weight: 900;
            background: var(--gold-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }

        .specialty {
            font-size: 16px;
            font-weight: 700;
            color: var(--purple);
            margin-bottom: 20px;
        }

        /* Campo de experi√™ncia personalizada */
        .personalization-section {
            background: rgba(124, 58, 237, 0.1);
            border: 2px solid var(--purple);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .personalization-title {
            font-size: 18px;
            font-weight: 800;
            color: var(--purple);
            margin-bottom: 8px;
        }

        .personalization-subtitle {
            font-size: 14px;
            color: var(--text);
            margin-bottom: 15px;
            font-weight: 600;
        }

        .regional-examples {
            display: flex;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .regional-tag {
            background: var(--gold-gradient);
            color: var(--dark);
            padding: 4px 8px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 700;
        }

        .name-input-inline {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--purple);
            border-radius: 10px;
            font-size: 15px;
            margin-bottom: 12px;
            font-family: inherit;
            font-weight: 600;
            text-align: center;
            background: rgba(255, 255, 255, 0.9);
        }

        .name-input-inline:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.2);
        }

        .personalize-btn {
            background: var(--purple-gradient);
            color: var(--white);
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 800;
            cursor: pointer;
            width: 100%;
            font-family: inherit;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .personalize-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(124, 58, 237, 0.3);
        }

        /* Status de leitura mental */
        .mind-reading-status {
            background: rgba(124, 58, 237, 0.1);
            border: 2px dashed var(--purple);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .mind-reading-status::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(124, 58, 237, 0.3), transparent);
            transition: left 0.8s ease;
        }

        .mind-reading-status.active::before {
            left: 100%;
        }

        .mind-text {
            font-size: 15px;
            font-weight: 800;
            color: var(--purple);
            opacity: 0;
            transform: translateY(20px) scale(0.8);
            transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            text-shadow: 0 2px 10px rgba(124, 58, 237, 0.3);
            position: relative;
            z-index: 1;
        }

        .mind-text.active {
            opacity: 1;
            transform: translateY(0) scale(1);
            animation: mindPulse 0.6s ease-out;
        }

        .mind-text.fade-out {
            opacity: 0;
            transform: translateY(-20px) scale(0.8);
            transition: all 0.5s ease-in;
        }

        @keyframes mindPulse {
            0% { transform: translateY(0) scale(1); }
            50% { 
                transform: translateY(-3px) scale(1.05); 
                text-shadow: 0 4px 15px rgba(124, 58, 237, 0.5); 
            }
            100% { transform: translateY(0) scale(1); }
        }

        /* Greeting personalizado */
        .personal-greeting {
            background: var(--gold-gradient);
            color: var(--dark);
            padding: 18px 20px;
            border-radius: 15px;
            font-size: 15px;
            font-weight: 700;
            text-align: center;
            margin: 20px 0;
            box-shadow: var(--shadow-card);
            line-height: 1.4;
        }

        /* Services */
        .services {
            display: flex;
            flex-direction: column;
            gap: 18px;
            margin-bottom: 25px;
        }

        .service-card {
            background: var(--white);
            border-radius: 18px;
            padding: 25px 20px;
            box-shadow: var(--shadow-card);
            border: 2px solid rgba(212, 175, 55, 0.2);
            cursor: pointer;
            transition: var(--transition-smooth);
            position: relative;
            overflow: hidden;
        }

        .service-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-glow);
            border-color: var(--accent);
        }

        .service-card.highlighted {
            transform: scale(1.02);
            box-shadow: var(--shadow-glow);
            border-color: var(--accent);
            z-index: 5;
        }

        .service-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .service-number {
            background: var(--gold-gradient);
            color: var(--dark);
            width: 35px;
            height: 35px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 16px;
            flex-shrink: 0;
        }

        .service-badge {
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 11px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .service-badge.free {
            background: var(--success);
            color: var(--white);
        }

        .service-badge.premium {
            background: var(--red-gradient);
            color: var(--white);
        }

        .service-badge.vip {
            background: var(--purple-gradient);
            color: var(--white);
        }

        .service-title {
            font-size: 18px;
            font-weight: 800;
            color: var(--dark);
            margin-bottom: 12px;
            line-height: 1.3;
        }

        .service-description {
            font-size: 14px;
            color: var(--text);
            margin-bottom: 15px;
            line-height: 1.5;
            font-weight: 500;
        }

        .service-local-info {
            background: rgba(212, 175, 55, 0.1);
            color: var(--dark);
            padding: 12px 15px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 600;
            margin: 15px 0;
            text-align: center;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }

        .service-price {
            font-size: 28px;
            font-weight: 900;
            background: var(--gold-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 5px;
            text-align: center;
        }

        .service-installments {
            font-size: 12px;
            color: var(--text);
            font-weight: 600;
            text-align: center;
            margin-bottom: 15px;
        }

        .service-btn {
            background: var(--gold-gradient);
            color: var(--dark);
            border: none;
            padding: 15px 20px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 800;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            font-family: inherit;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .service-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-glow);
        }

        .service-btn.premium {
            background: var(--dark-gradient);
            color: var(--white);
        }

        .service-btn.vip {
            background: var(--purple-gradient);
            color: var(--white);
        }

        /* Loading state para APIs */
        .loading-geo {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(124, 58, 237, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            z-index: 1000;
            opacity: 0;
            transform: translateX(100px);
            transition: all 0.5s ease;
        }

        .loading-geo.show {
            opacity: 1;
            transform: translateX(0);
        }

        /* Countdown de decis√£o */
        .countdown-section {
            background: var(--gold-gradient);
            color: var(--dark);
            padding: 25px 20px;
            border-radius: 15px;
            text-align: center;
            margin: 25px 0;
            box-shadow: var(--shadow-glow);
            display: none;
            opacity: 0;
            transform: scale(0.8);
            transition: all 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            border: 3px solid var(--red);
        }

        .countdown-section.show {
            display: block;
            opacity: 1;
            transform: scale(1);
        }

        .countdown-text {
            font-size: 18px;
            font-weight: 800;
            margin-bottom: 15px;
        }

        .countdown-number {
            font-size: 48px;
            font-weight: 900;
            color: var(--red);
            margin: 10px 0;
            text-shadow: 0 4px 15px rgba(220, 38, 38, 0.5);
            animation: countdownBeat 1s ease-out infinite;
        }

        @keyframes countdownBeat {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .countdown-subtitle {
            font-size: 14px;
            font-weight: 600;
            opacity: 0.8;
        }

        @media (max-width: 360px) {
            .container {
                padding: 10px;
            }
            
            .name {
                font-size: 24px;
            }
            
            .avatar {
                width: 180px;
                height: 270px;
            }
            
            .avatar-message {
                font-size: 9px;
                padding: 6px 8px;
                max-width: 120px;
                min-height: 28px;
            }
            
            .service-card {
                padding: 20px 15px;
            }
        }

        @media (min-width: 480px) {
            .container {
                padding: 20px;
            }
            
            .avatar {
                width: 220px;
                height: 330px;
            }
            
            .avatar-message {
                font-size: 12px;
                max-width: 160px;
            }
        }
    </style>
</head>
<body>
    <div class="loading-geo" id="loadingGeo">Detectando localiza√ß√£o...</div>
    
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1 class="name">ADRIANA SOUSA</h1>
            <p class="specialty">Especialista em Transforma√ß√£o Mental</p>
            
            <div class="avatar-container">
                <img src="https://github.com/marcelo-davila-setup/dris/raw/main/Design%20sem%20nome.png" 
                     alt="Adriana Sousa" 
                     class="avatar" 
                     id="avatar"
                     onerror="this.src='https://via.placeholder.com/200x300/F8F5F0/7C3AED?text=ADRIANA'">
                
                <div class="avatar-text-overlay" id="avatarTextOverlay">
                    <div class="avatar-message" id="avatarMessage">
                        Iniciando leitura...
                    </div>
                </div>
            </div>

            <!-- Campo de personaliza√ß√£o integrado -->
            <div class="personalization-section" id="personalizationSection">
                <div class="personalization-title">Quer experi√™ncia personalizada?</div>
                <div class="personalization-subtitle">Sauda√ß√µes regionais como:</div>
                <div class="regional-examples">
                    <span class="regional-tag">Uai S√¥</span>
                    <span class="regional-tag">Tch√™</span>
                    <span class="regional-tag">Oxe</span>
                    <span class="regional-tag">Eita</span>
                </div>
                <input type="text" class="name-input-inline" id="nameInputInline" placeholder="Qual seu nome?" maxlength="20">
                <button class="personalize-btn" onclick="startPersonalizedExperience()">Personalizar Experi√™ncia</button>
            </div>

            <!-- Status de leitura mental -->
            <div class="mind-reading-status" id="mindReadingStatus" style="display: none;">
                <div class="mind-text" id="mindText">
                    Iniciando leitura mental...
                </div>
            </div>
            
            <div class="personal-greeting" id="personalGreeting" style="display: none;">
                Analisando seus padr√µes mentais...
            </div>
        </div>

        <!-- Services -->
        <div class="services" id="servicesContainer">
            <!-- Servi√ßo 1: Gratuito -->
            <div class="service-card" onclick="selectService(1)">
                <div class="service-header">
                    <div class="service-number">1</div>
                    <div class="service-badge free">GRATUITO</div>
                </div>
                <h3 class="service-title">Aula Gr√°tis + Exerc√≠cio</h3>
                <p class="service-description">
                    Aula GRATUITA completa onde voc√™ descobre qual cren√ßa limitante espec√≠fica est√° sabotando sua vida + exerc√≠cio pr√°tico exclusivo para quebrar esse padr√£o mental destrutivo.
                </p>
                <div class="service-local-info" id="localInfo1">
                    <!-- Preenchido dinamicamente -->
                </div>
                <div class="service-price">GR√ÅTIS</div>
                <div class="service-installments">Acesso imediato ‚Ä¢ Sem compromisso</div>
                <button class="service-btn">QUERO ACESSO GRATUITO</button>
            </div>

            <!-- Servi√ßo 2: Premium -->
            <div class="service-card" onclick="selectService(2)">
                <div class="service-header">
                    <div class="service-number">2</div>
                    <div class="service-badge premium">PREMIUM</div>
                </div>
                <h3 class="service-title">Voc√™ Comigo Todos os Dias</h3>
                <p class="service-description">
                    Voc√™ comigo todos os dias por emails + exerc√≠cios para ansiedade, medos, bloqueios. Se ansiedade, medos, bloqueios te atrapalham hoje, vamos destravar isso?
                </p>
                <div class="service-local-info" id="localInfo2">
                    <!-- Preenchido dinamicamente -->
                </div>
                <div class="service-price">R$ 27,90</div>
                <div class="service-installments">Por m√™s ‚Ä¢ Cancele quando quiser</div>
                <button class="service-btn premium">COME√áAR TRANSFORMA√á√ÉO</button>
            </div>

            <!-- Servi√ßo 3: VIP -->
            <div class="service-card" onclick="selectService(3)">
                <div class="service-header">
                    <div class="service-number">3</div>
                    <div class="service-badge vip">VIP COMPLETO</div>
                </div>
                <h3 class="service-title">"Conhecer a Ti Mesmo"</h3>
                <p class="service-description">
                    Conhecer a ti mesmo, aqui vamos a um autoquestionamento de decis√µes e elimina√ß√£o de bloqueios para uma vida saud√°vel. M√©todo para descobrir quem voc√™ realmente √©.
                </p>
                <div class="service-local-info" id="localInfo3">
                    <!-- Preenchido dinamicamente -->
                </div>
                <div class="service-price">R$ 97,00</div>
                <div class="service-installments">Pagamento √∫nico ‚Ä¢ Acesso vital√≠cio</div>
                <button class="service-btn vip">SER VIP AGORA</button>
            </div>
        </div>

        <!-- Countdown de decis√£o -->
        <div class="countdown-section" id="countdownSection">
            <div class="countdown-text">Qual caminho sua alma escolhe?</div>
            <div class="countdown-number" id="countdownNumber">5</div>
            <div class="countdown-subtitle">Suas op√ß√µes retornam...</div>
        </div>
    </div>

    <script>
        // APIs de geolocaliza√ß√£o + fallback
        const GEO_APIS = [
            {
                url: 'https://ipapi.co/json/',
                normalizer: (data) => ({
                    city: data.city,
                    state: data.region_code,
                    country: data.country_code
                })
            },
            {
                url: 'https://get.geojs.io/v1/ip/geo.json',
                normalizer: (data) => ({
                    city: data.city,
                    state: data.region,
                    country: data.country_code
                })
            },
            {
                url: 'https://ipinfo.io/json',
                normalizer: (data) => ({
                    city: data.city,
                    state: data.region,
                    country: data.country
                })
            }
        ];

        // Dados regionais SEM jarg√µes masculinos
        const REGIONAL_DATA = {
            'SP': { 
                saudacao: 'E a√≠', 
                comida: 'coxinha', 
                expressao: 'Sua mente paulistana merece liberdade', 
                gentilico: 'Paulista',
                regioes: ['S√£o Paulo', 'Guarulhos', 'Campinas', 'Vila Madalena', 'Liberdade'],
                shoppings: ['Shopping Ibirapuera', 'Shopping Morumbi'],
                cultural: 'Tem pastel de feira hoje'
            },
            'RJ': { 
                saudacao: 'E a√≠', 
                comida: 'feijoada', 
                expressao: 'Sua mente carioca merece paz', 
                gentilico: 'Carioca',
                regioes: ['Rio de Janeiro', 'Copacabana', 'Ipanema', 'Barra da Tijuca'],
                shoppings: ['BarraShopping', 'Shopping Leblon'],
                cultural: 'Praia hoje'
            },
            'MG': { 
                saudacao: 'Uai', 
                comida: 'p√£o de queijo', 
                expressao: 'Sua mente mineira merece liberdade', 
                gentilico: 'Mineiro',
                regioes: ['Belo Horizonte', 'Ipatinga', 'Vale do A√ßo'],
                shoppings: ['BH Shopping', 'Shopping Vale do A√ßo'],
                cultural: 'P√£o de queijo quentinho'
            },
            'RS': { 
                saudacao: 'Tch√™', 
                comida: 'chimarr√£o', 
                expressao: 'Sua mente ga√∫cha merece liberdade', 
                gentilico: 'Ga√∫cho',
                regioes: ['Porto Alegre', 'Caxias do Sul'],
                shoppings: ['Shopping Iguatemi', 'BarraShoppingSul'],
                cultural: 'Chimarr√£o na roda'
            },
            'BA': { 
                saudacao: 'Oxe', 
                comida: 'acaraj√©', 
                expressao: 'Sua mente baiana merece paz', 
                gentilico: 'Baiano',
                regioes: ['Salvador', 'Feira de Santana'],
                shoppings: ['Shopping Barra', 'Salvador Shopping'],
                cultural: 'Ax√© no cora√ß√£o'
            }
            // Outros estados podem ser adicionados conforme necess√°rio
        };

        // Vari√°veis globais
        let userData = {
            name: '',
            city: 'S√£o Paulo',
            state: 'SP',
            greeting: 'E a√≠',
            food: 'coxinha',
            expression: 'Sua mente paulistana merece liberdade',
            gentilico: 'Paulista',
            regioes: ['S√£o Paulo'],
            shoppings: ['Shopping Ibirapuera'],
            cultural: 'Tem pastel de feira hoje',
            hora: '',
            minuto: ''
        };

        let ttsActive = false;
        let currentVoice = null;
        let originalScrollPosition = 0;
        let isPresenting = false;

        // Detectar localiza√ß√£o
        async function detectLocationWithFallback() {
            const loadingIndicator = document.getElementById('loadingGeo');
            loadingIndicator.classList.add('show');

            for (let i = 0; i < GEO_APIS.length; i++) {
                try {
                    const response = await fetch(GEO_APIS[i].url, { timeout: 5000 });
                    if (!response.ok) throw new Error(`HTTP ${response.status}`);
                    
                    const data = await response.json();
                    const location = GEO_APIS[i].normalizer(data);
                    
                    if (location.city && location.state && location.country === 'BR') {
                        userData.city = location.city;
                        userData.state = location.state;
                        
                        const regional = REGIONAL_DATA[location.state] || REGIONAL_DATA['SP'];
                        Object.assign(userData, regional);
                        
                        loadingIndicator.classList.remove('show');
                        return true;
                    }
                } catch (error) {
                    continue;
                }
            }
            
            // Fallback para S√£o Paulo
            const spData = REGIONAL_DATA['SP'];
            Object.assign(userData, spData);
            loadingIndicator.classList.remove('show');
            return false;
        }

        // Mensagens de leitura mental
        function generateMindMessages() {
            const agora = new Date();
            const hora = agora.getHours();
            const minuto = agora.getMinutes().toString().padStart(2, '0');
            userData.hora = hora;
            userData.minuto = minuto;
            
            const saudacoesCreativas = {
                'SP': 'Paulistano?',
                'RJ': 'Carioca?', 
                'MG': 'Mineiro?',
                'RS': 'Ga√∫cho?',
                'BA': 'Baiano?',
                'default': 'Brasileiro?'
            };

            const saudacaoCreativa = saudacoesCreativas[userData.state] || saudacoesCreativas['default'];
            const locaisEspecificos = userData.regioes.concat(userData.shoppings || []);
            const localEscolhido = locaisEspecificos[Math.floor(Math.random() * locaisEspecificos.length)];
            const perguntaLocal = `Pr√≥ximo de ${localEscolhido}?`;

            return [
                {
                    text: 'PARE AGORA!',
                    class: 'shock',
                    duration: 1000
                },
                {
                    text: `S√£o ${hora}:${minuto} exato`,
                    class: 'location',
                    duration: 1800
                },
                {
                    text: saudacaoCreativa,
                    class: 'cultural',
                    duration: 1200
                },
                {
                    text: `${userData.city}?`,
                    class: 'location',
                    duration: 1600
                },
                {
                    text: perguntaLocal,
                    class: 'location',
                    duration: 2000
                },
                {
                    text: userData.cultural,
                    class: 'cultural',
                    duration: 2200
                },
                {
                    text: 'Como EU sei disso?',
                    class: 'revelation',
                    duration: 1800
                },
                {
                    text: 'SUA MENTE FOI LIDA!',
                    class: 'shock',
                    duration: 2500
                }
            ];
        }

        // Sistema TTS
        function initVoice() {
            if ('speechSynthesis' in window) {
                const voices = speechSynthesis.getVoices();
                currentVoice = voices.find(v => v.lang.includes('pt-BR')) || voices[0];
            }
        }

        function speak(text) {
            if (!ttsActive && 'speechSynthesis' in window) {
                ttsActive = true;
                
                const avatar = document.getElementById('avatar');
                avatar.classList.add('speaking');
                
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'pt-BR';
                utterance.voice = currentVoice;
                utterance.rate = 0.9;
                utterance.pitch = 1.1;
                
                utterance.onend = () => {
                    ttsActive = false;
                    avatar.classList.remove('speaking');
                };
                
                speechSynthesis.speak(utterance);
            }
        }

        // Sistema de scroll controlado
        function lockScrollAt(position) {
            originalScrollPosition = window.pageYOffset;
            document.body.style.overflow = 'hidden';
            document.body.style.position = 'fixed';
            document.body.style.top = `-${originalScrollPosition}px`;
            document.body.style.width = '100%';
            isPresenting = true;
        }

        function unlockScroll() {
            document.body.style.overflow = '';
            document.body.style.position = '';
            document.body.style.top = '';
            document.body.style.width = '';
            window.scrollTo(0, originalScrollPosition);
            isPresenting = false;
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // Calcular tempo de TTS
        function calculateTTSTime(text) {
            const wordCount = text.split(' ').length;
            return wordCount * 180 + 1000; // 180ms por palavra + buffer
        }

        // Sistema de experi√™ncia personalizada
        async function startPersonalizedExperience() {
            const nameInput = document.getElementById('nameInputInline');
            const name = nameInput.value.trim();
            
            if (name) {
                userData.name = name;
                localStorage.setItem('userName', name);
            }
            
            // Scroll para header e travar
            const header = document.querySelector('.header');
            header.scrollIntoView({ behavior: 'smooth', block: 'start' });
            await sleep(800);
            lockScrollAt(window.pageYOffset);
            
            // Esconder personaliza√ß√£o e mostrar leitura mental
            document.getElementById('personalizationSection').style.display = 'none';
            const mindStatus = document.getElementById('mindReadingStatus');
            mindStatus.style.display = 'flex';
            
            setTimeout(() => {
                startGuidedMindReadingWithAvatarOverlay();
            }, 500);
        }

        // Sequ√™ncia de leitura mental
        async function startGuidedMindReadingWithAvatarOverlay() {
            const mindText = document.getElementById('mindText');
            const mindStatus = document.getElementById('mindReadingStatus');
            const avatarMessage = document.getElementById('avatarMessage');
            const mindMessages = generateMindMessages();
            
            // FASE 1: Leitura mental completa
            for (let index = 0; index < mindMessages.length; index++) {
                const messageObj = mindMessages[index];
                let personalizedMessage = messageObj.text;
                
                if (userData.name && index === 0) {
                    personalizedMessage = `PARE, ${userData.name.toUpperCase()}!`;
                }

                // Efeito de scan
                mindStatus.classList.add('active');
                setTimeout(() => mindStatus.classList.remove('active'), 800);
                
                // Fade out
                mindText.classList.add('fade-out');
                avatarMessage.classList.remove('show');
                avatarMessage.classList.remove(...['shock', 'revelation', 'location', 'cultural']);
                avatarMessage.classList.add('fadeout');
                
                await sleep(400);
                
                // Atualizar textos
                mindText.textContent = personalizedMessage;
                mindText.classList.remove('fade-out');
                avatarMessage.textContent = personalizedMessage;
                avatarMessage.classList.remove('fadeout');
                
                if (messageObj.class) {
                    avatarMessage.classList.add(messageObj.class);
                }
                
                mindText.classList.add('active');
                avatarMessage.classList.add('show');
                
                speak(personalizedMessage);
                await sleep(messageObj.duration);
            }
            
            // FASE 2: Finalizar leitura mental
            await sleep(1000);
            mindStatus.style.display = 'none';
            avatarMessage.classList.remove('show');
            
            // FASE 3: GREETING PERSONALIZADO COM PAUSA ADEQUADA
            const greeting = document.getElementById('personalGreeting');
            greeting.style.display = 'block';
            updateContent();
            
            const greetingText = greeting.textContent;
            speak(greetingText);
            
            // AGUARDAR TTS completar + 3 segundos extras
            const ttsTime = calculateTTSTime(greetingText);
            await sleep(ttsTime + 3000);
            
            // FASE 4: LIBERAR scroll e iniciar servi√ßos
            unlockScroll();
            await startControlledServicePresentation();
        }

        // Apresenta√ß√£o de servi√ßos com timing correto
        async function startControlledServicePresentation() {
            const serviceCards = document.querySelectorAll('.service-card');
            const avatarMessage = document.getElementById('avatarMessage');
            
            console.log('üéØ Iniciando apresenta√ß√£o dos servi√ßos...');
            
            // Mensagens para cada servi√ßo (sem reflex√£o filos√≥fica)
            const servicePresentations = [
                {
                    // OP√á√ÉO 1
                    messages: [
                        {
                            text: `OP√á√ÉO 1`,
                            class: 'cultural',
                            duration: 800
                        },
                        {
                            text: 'AULA GR√ÅTIS + EXERC√çCIO',
                            class: 'shock',
                            duration: 1200,
                            speak: true
                        },
                        {
                            text: 'Qual bloqueio nos impede',
                            class: 'revelation',
                            duration: 1100
                        },
                        {
                            text: 'de quase TUDO?',
                            class: 'shock',
                            duration: 1800,
                            speak: true
                        }
                    ]
                },
                {
                    // OP√á√ÉO 2
                    messages: [
                        {
                            text: `OP√á√ÉO 2`,
                            class: 'cultural', 
                            duration: 800
                        },
                        {
                            text: 'VOC√ä COMIGO TODOS OS DIAS',
                            class: 'revelation',
                            duration: 1200,
                            speak: true
                        },
                        {
                            text: 'Por EMAILS + exerc√≠cios',
                            class: 'location',
                            duration: 1000
                        },
                        {
                            text: 'ANSIEDADE te atrapalha?',
                            class: 'shock',
                            duration: 1100,
                            speak: true
                        },
                        {
                            text: 'MEDOS te paralisam?',
                            class: 'shock',
                            duration: 1100,
                            speak: true
                        },
                        {
                            text: 'BLOQUEIOS te limitam?',
                            class: 'shock',
                            duration: 1100,
                            speak: true
                        },
                        {
                            text: 'VAMOS DESTRAVAR ISSO!',
                            class: 'revelation',
                            duration: 1600,
                            speak: true
                        }
                    ]
                },
                {
                    // OP√á√ÉO 3 - Expandida conforme solicitado
                    messages: [
                        {
                            text: `OP√á√ÉO 3`,
                            class: 'cultural',
                            duration: 800
                        },
                        {
                            text: 'CONHECER A TI MESMO',
                            class: 'shock',
                            duration: 1300,
                            speak: true
                        },
                        {
                            text: 'Aqui vamos trazer quest√µes',
                            class: 'revelation',
                            duration: 1200
                        },
                        {
                            text: 'que levam a RESOLU√á√ïES',
                            class: 'shock',
                            duration: 1200,
                            speak: true
                        },
                        {
                            text: 'dos principais bloqueios:',
                            class: 'location',
                            duration: 1000
                        },
                        {
                            text: 'MEDO, ANSIEDADE, TRISTEZA',
                            class: 'shock',
                            duration: 1400,
                            speak: true
                        },
                        {
                            text: 'N√ÉO SOU CAPAZ',
                            class: 'revelation',
                            duration: 1200,
                            speak: true
                        },
                        {
                            text: 'entre MUITOS outros!',
                            class: 'shock',
                            duration: 1100,
                            speak: true
                        },
                        {
                            text: 'R$ 97,00 √öNICO pagamento',
                            class: 'cultural',
                            duration: 1600,
                            speak: true
                        }
                    ]
                }
            ];

            // Apresentar CADA servi√ßo sequencialmente
            for (let serviceIndex = 0; serviceIndex < serviceCards.length; serviceIndex++) {
                console.log(`üî• Apresentando servi√ßo ${serviceIndex + 1}...`);
                
                const serviceCard = serviceCards[serviceIndex];
                const presentation = servicePresentations[serviceIndex];

                // Scroll para servi√ßo atual
                serviceCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                await sleep(1200);
                
                // Travar scroll durante apresenta√ß√£o
                lockScrollAt(window.pageYOffset);

                // Destacar servi√ßo atual
                serviceCards.forEach(card => card.style.opacity = '0.4');
                serviceCard.style.opacity = '1';
                serviceCard.classList.add('highlighted');

                // Apresentar TODAS as mensagens do servi√ßo
                for (let i = 0; i < presentation.messages.length; i++) {
                    const message = presentation.messages[i];
                    
                    // Fade out mensagem anterior
                    avatarMessage.classList.remove('show');
                    avatarMessage.classList.remove(...['shock', 'revelation', 'location', 'cultural', 'countdown']);
                    avatarMessage.classList.add('fadeout');
                    await sleep(300);
                    
                    // Mostrar nova mensagem
                    avatarMessage.textContent = message.text;
                    avatarMessage.classList.remove('fadeout');
                    avatarMessage.classList.add('show', message.class);
                    
                    // TTS se marcado
                    if (message.speak) {
                        speak(message.text);
                    }
                    
                    await sleep(message.duration);
                }

                // Reset visual do servi√ßo
                serviceCard.classList.remove('highlighted');
                
                // Liberar scroll brevemente antes do pr√≥ximo
                unlockScroll();
                await sleep(500);
            }

            console.log('‚úÖ Todos os servi√ßos apresentados. Iniciando countdown...');
            
            // Ap√≥s op√ß√£o 3, ir direto para countdown
            await startCountdownSequence();
        }

        // Nova sequ√™ncia: Countdown direto ap√≥s op√ß√£o 3
        async function startCountdownSequence() {
            console.log('‚è∞ Iniciando countdown de decis√£o...');
            
            const avatarMessage = document.getElementById('avatarMessage');
            const countdownSection = document.getElementById('countdownSection');
            const serviceCards = document.querySelectorAll('.service-card');
            
            // Restaurar todos os servi√ßos
            serviceCards.forEach(card => card.style.opacity = '1');
            await sleep(500);
            
            // SCROLL PARA BAIXO at√© o countdown
            countdownSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
            await sleep(1500);
            
            // Mostrar se√ß√£o de countdown
            countdownSection.classList.add('show');
            
            // TRAVAR scroll na se√ß√£o de countdown
            lockScrollAt(window.pageYOffset);
            
            // Pergunta no avatar
            avatarMessage.classList.remove('show');
            avatarMessage.classList.add('fadeout');
            await sleep(300);
            
            avatarMessage.textContent = 'Qual caminho sua alma escolhe?';
            avatarMessage.classList.remove('fadeout');
            avatarMessage.classList.add('show', 'revelation');
            speak('Qual caminho sua alma escolhe?');
            
            await sleep(2000);
            
            // COUNTDOWN REGRESSIVA (6 segundos)
            const countdownNumber = document.getElementById('countdownNumber');
            
            for (let i = 6; i >= 1; i--) {
                countdownNumber.textContent = i;
                
                // Sincronizar avatar com contagem
                avatarMessage.classList.remove('show');
                avatarMessage.classList.add('fadeout');
                await sleep(200);
                
                avatarMessage.textContent = `${i}`;
                avatarMessage.classList.remove('fadeout');
                avatarMessage.classList.add('show', 'countdown');
                
                await sleep(800);
            }
            
            // Mensagem final antes do scroll reverso
            avatarMessage.classList.remove('show');
            avatarMessage.classList.add('fadeout');
            await sleep(200);
            
            avatarMessage.textContent = 'Suas op√ß√µes retornam...';
            avatarMessage.classList.remove('fadeout');
            avatarMessage.classList.add('show', 'cultural');
            speak('Suas op√ß√µes retornam');
            
            await sleep(1500);
            
            // SCROLL REVERSO LENTO para op√ß√µes
            unlockScroll();
            const firstService = serviceCards[0];
            firstService.scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
            
            await sleep(2500); // Scroll lento
            
            // Destacar todas as op√ß√µes
            serviceCards.forEach((card, index) => {
                setTimeout(() => {
                    card.style.transform = 'scale(1.02)';
                    card.style.boxShadow = 'var(--shadow-glow)';
                    card.style.borderColor = 'var(--accent)';
                    
                    setTimeout(() => {
                        card.style.transform = 'scale(1)';
                        card.style.boxShadow = 'var(--shadow-card)';
                        card.style.borderColor = 'rgba(212, 175, 55, 0.2)';
                    }, 2000);
                }, index * 300);
            });
            
            // Esconder countdown
            countdownSection.classList.remove('show');
            
            // Mensagem final
            await sleep(1000);
            avatarMessage.classList.remove('show');
            avatarMessage.classList.add('fadeout');
            await sleep(300);
            
            avatarMessage.textContent = 'Sua transforma√ß√£o te espera...';
            avatarMessage.classList.remove('fadeout');
            avatarMessage.classList.add('show', 'revelation');
            
            console.log('‚úÖ Sequ√™ncia completa finalizada.');
        }

        // Atualizar conte√∫do personalizado SEM jarg√µes masculinos
        function updateContent() {
            const greeting = document.getElementById('personalGreeting');
            
            let saudacao = userData.name ? 
                `${userData.greeting}, ${userData.name}!` : 
                `${userData.greeting}!`;

            // F√≥rmula universal sem exclus√£o de g√™nero
            const mensagemCompleta = `${saudacao} ${userData.hora}:${userData.minuto} em ${userData.city}! ${userData.expression}! ${userData.gentilico}, sua mente merece TRANSFORMA√á√ÉO completa!`;

            greeting.textContent = mensagemCompleta;

            // Atualizar info locais
            document.getElementById('localInfo1').textContent = 
                `Em ${userData.city}, quem tem ${userData.food} no caf√© merece paz mental GRATUITA!`;
                
            document.getElementById('localInfo2').textContent = 
                `Emails di√°rios personalizados para ${userData.gentilico} de ${userData.state} ‚Ä¢ M√©todo regional adaptado`;
                
            document.getElementById('localInfo3').textContent = 
                `${userData.expression}! Transforma√ß√£o COMPLETA para ${userData.city}! Programa vital√≠cio regional`;
        }

        // Sele√ß√£o de servi√ßos
        function selectService(serviceNumber) {
            const services = {
                1: 'AULA GRATUITA + Exerc√≠cio Libertador - Cren√ßa Limitante',
                2: 'EMAILS DI√ÅRIOS Premium com Exerc√≠cios Espec√≠ficos (R$ 27,90/m√™s)',
                3: 'CONHECER A TI MESMO - Programa Completo Vital√≠cio (R$ 97)'
            };

            const greeting = userData.name ? `Ol√° Adriana! Sou ${userData.name}` : 'Ol√° Adriana!';
            const locationInfo = `de ${userData.city}-${userData.state}`;
            
            const message = encodeURIComponent(
                `${greeting} ${locationInfo}. ${userData.expression} Vim pelo seu link bio depois da LEITURA MENTAL e tenho interesse em: ${services[serviceNumber]}. Como posso come√ßar minha transforma√ß√£o mental completa?`
            );

            window.open(`https://wa.me/5511999999999?text=${message}`, '_blank');
        }

        // Event listeners
        document.getElementById('nameInputInline').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                startPersonalizedExperience();
            }
        });

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', async function() {
            // Carregar nome salvo
            const savedName = localStorage.getItem('userName');
            if (savedName) {
                userData.name = savedName;
                document.getElementById('nameInputInline').value = savedName;
            }

            // Detectar localiza√ß√£o
            await detectLocationWithFallback();
            
            // Inicializar TTS
            if ('speechSynthesis' in window) {
                speechSynthesis.addEventListener('voiceschanged', initVoice);
                if (speechSynthesis.getVoices().length > 0) {
                    initVoice();
                }
            }
        });
    </script>
</body>
</html>
